<script>
const env=document.getElementById("env");
const unlock=document.getElementById("unlock");
const final=document.getElementById("final");
const type=document.getElementById("type");

let opened=false;

env.onclick=()=>{
 if(opened) return;
 opened=true;
 env.classList.add("opened");
 document.getElementById("envText").innerText="Envelope opened âœ”";
 unlock.classList.remove("hidden");
};

let timer,hold=false;

unlock.onmousedown=()=>{
 hold=true;
 timer=setTimeout(reveal,1500);
};

unlock.onmouseup=reset;
unlock.ontouchstart=()=>{
 hold=true;
 timer=setTimeout(reveal,1500);
}
unlock.ontouchend=reset;

function reset(){
 if(!hold) return;
 hold=false;
 clearTimeout(timer);
}

function reveal(){
 unlock.style.display="none";
 final.classList.remove("hidden");
 typeText();
}

/* Structured message */
const message=[
"<b>I Love You ðŸ’–</b>",
"",
"Let's watch a movie of your choice.",
"Let me know which one <b>QUICKLY QUICKLY</b>.",
"",
"<span class='signature'>From Mr. Hafeez.</span>"
];

let index=0;

function typeText(){
 type.innerHTML="";
 index=0;

 const t=setInterval(()=>{
  if(index<message.length){
    type.innerHTML+=message[index]+"<br>";
    index++;
  }else clearInterval(t);
 },350);
}
</script>
